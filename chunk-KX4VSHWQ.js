import{a as yt,b as Mt,c as vt}from"./chunk-KRUVEJNH.js";import{d as $}from"./chunk-ZWROYXMX.js";import{a as Tt,b as bt,c as Vt}from"./chunk-G25GONJB.js";import{a as dt,b as mt}from"./chunk-XX53FIGM.js";import{a as st}from"./chunk-NGUIXSPP.js";import{a as pt,b as gt,c as ft,d as ht,e as xt,f as Ct,g as St,h as wt}from"./chunk-7LSYZBW2.js";import{a as et,c as it,e as nt}from"./chunk-3X4QDQRD.js";import{a as ot,f as rt}from"./chunk-X6DSTNHV.js";import{a as _t,b as ut}from"./chunk-PAQ6KTT7.js";import{N as ct,j as G,l as N,m as W,p as L,q as K}from"./chunk-Y4BKGEAB.js";import{$ as E,$a as o,Ab as I,Bb as _,Cb as u,Db as f,Fa as D,Ga as k,Ua as y,Ub as j,Va as M,W as B,X as P,Xa as v,Ya as C,Za as S,_a as x,a as T,ab as s,b as F,bb as R,da as l,ea as d,gb as w,ib as p,jb as a,jd as X,kc as Q,ma as H,md as V,oc as U,od as Y,qd as tt,rc as J,rd as at,sd as lt,tc as q,wa as m,wc as Z,xb as c,yb as b,zb as z}from"./chunk-2IW5L3VM.js";var O=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=k({type:r});static \u0275inj=P({imports:[V,V]})}return r})();var Et=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=k({type:r});static \u0275inj=P({imports:[O,V,O,V]})}return r})();var kt=(r,g)=>g.name;function Dt(r,g){if(r&1){let t=w();o(0,"button",4),p("click",function(){l(t);let e=a();return d(e.resetSettings())}),c(1,"Reset"),s(),o(2,"button",4),p("click",function(){l(t);let e=a();return d(e.router.navigate(["settings"]))}),c(3," Expand "),o(4,"mat-icon"),c(5,"open_in_new"),s()()}}function zt(r,g){if(r&1){let t=w();o(0,"button",4),p("click",function(){l(t);let e=a();return d(e.settingsService.downloadSettings())}),o(1,"mat-icon"),c(2,"download"),s(),c(3," Download "),s(),o(4,"button",4),p("click",function(){l(t);let e=a();return d(e.settingsService.selectAndValidateSettingsJsonFile())}),o(5,"mat-icon"),c(6,"cloud_upload"),s(),c(7," Upload "),s(),o(8,"button",4),p("click",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),c(9,"Save"),s(),o(10,"button",4),p("click",function(){l(t);let e=a();return d(e.resetSettings())}),c(11,"Reset"),s()}}function It(r,g){if(r&1&&(o(0,"small",11),c(1),s()),r&2){let t=a().$implicit;m(),z("(",t.retryAfterDate,")")}}function Lt(r,g){if(r&1&&(o(0,"mat-option",7),c(1),y(2,It,2,1,"small",11),s()),r&2){let t=g.$implicit;x("value",t)("disabled",t.disabled),m(),I(" ",t.org," -- ",t.name," "),m(),M(t.retryAfter&&t.disabled?2:-1)}}function Ot(r,g){if(r&1&&(o(0,"mat-option",9),c(1),s()),r&2){let t=g.$implicit;x("value",t),m(),b(t)}}function At(r,g){if(r&1&&(o(0,"mat-option",9),c(1),s()),r&2){let t=g.$implicit;x("value",t),m(),b(t.name)}}function Bt(r,g){if(r&1){let t=w();o(0,"div",2)(1,"mat-form-field",5)(2,"mat-label"),c(3,"Model"),s(),o(4,"mat-select",6),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().model,e)||(n.settings().model=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),C(5,Lt,3,5,"mat-option",7,v),s()(),o(7,"mat-form-field",5)(8,"mat-label"),c(9,"Processing Strategy"),s(),o(10,"mat-select",8),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().processingStrategy,e)||(n.settings().processingStrategy=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),C(11,Ot,2,2,"mat-option",9,v),s()(),o(13,"mat-form-field",5)(14,"mat-label"),c(15,"Max Output Tokens"),s(),o(16,"input",10),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().maxOutputTokens,e)||(n.settings().maxOutputTokens=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()(),o(17,"mat-form-field",5)(18,"mat-label"),c(19,"Role"),s(),o(20,"mat-select",6),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().selectedPrompt,e)||(n.settings().selectedPrompt=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.onPromptChange())}),C(21,At,2,2,"mat-option",9,kt),s()()()}if(r&2){let t=a();m(4),_("ngModel",t.settings().model),x("compareWith",t.compareModels),m(),S(t.settings().models),m(5),_("ngModel",t.settings().processingStrategy),m(),S(t.processingStrategies),m(5),_("ngModel",t.settings().maxOutputTokens),m(4),_("ngModel",t.settings().selectedPrompt),x("compareWith",t.comparePrompts),m(),S(t.settings().prompts)}}function Ht(r,g){if(r&1&&(o(0,"small",11),c(1),s()),r&2){let t=a().$implicit;m(),z("(",t.retryAfterDate,")")}}function Rt(r,g){if(r&1&&(o(0,"mat-option",7),c(1),y(2,Ht,2,1,"small",11),s()),r&2){let t=g.$implicit;x("value",t)("disabled",t.disabled),m(),I(" ",t.org," -- ",t.name," "),m(),M(t.retryAfter&&t.disabled?2:-1)}}function jt(r,g){if(r&1&&(o(0,"mat-option",9),c(1),s()),r&2){let t=g.$implicit;x("value",t),m(),b(t)}}function Gt(r,g){if(r&1&&(o(0,"mat-option",9),c(1),s()),r&2){let t=g.$implicit;x("value",t),m(),b(t.name)}}function Nt(r,g){if(r&1){let t=w();o(0,"button",30),p("click",function(e){l(t);let n=a().$implicit;return a(2).settingsService.addPrompt(n,e),d(e.stopPropagation())}),o(1,"mat-icon"),c(2,"add_circle"),s()()}}function Kt(r,g){if(r&1){let t=w();o(0,"div",29)(1,"mat-checkbox",31),f("ngModelChange",function(e){let n=l(t).$implicit;return u(n.selected,e)||(n.selected=e),d(e)}),p("change",function(){l(t);let e=a(3);return d(e.settingsService.saveSettings())}),s(),o(2,"mat-form-field",32)(3,"input",33),f("ngModelChange",function(e){let n=l(t).$implicit;return u(n.text,e)||(n.text=e),d(e)}),p("input",function(){l(t);let e=a(3);return d(e.settingsService.saveSettings())}),s()(),o(4,"button",25),p("click",function(){let e=l(t).$index,n=a().$implicit,h=a(2);return d(h.settingsService.removePrompt(n,e))}),o(5,"mat-icon"),c(6,"remove_circle"),s()()()}if(r&2){let t=g.$implicit;m(),_("ngModel",t.selected),m(2),_("ngModel",t.text)}}function $t(r,g){if(r&1){let t=w();o(0,"mat-expansion-panel",22),p("opened",function(){let e=l(t).$implicit,n=a(2);return d(n.onPanelOpen(e.name))})("closed",function(){l(t);let e=a(2);return d(e.onPanelClose())}),o(1,"mat-expansion-panel-header")(2,"mat-panel-title"),c(3),s(),o(4,"mat-panel-description")(5,"div",23),y(6,Nt,3,0,"button",24),o(7,"button",25),p("click",function(e){let n=l(t).$implicit;return a(2).settingsService.removePromptItem(n.name),d(e.stopPropagation())}),o(8,"mat-icon"),c(9,"delete"),s()()()()(),o(10,"div",26)(11,"mat-form-field",5)(12,"mat-label"),c(13,"Name"),s(),o(14,"input",27),f("ngModelChange",function(e){let n=l(t).$implicit;return u(n.name,e)||(n.name=e),d(e)}),p("input",function(){l(t);let e=a(2);return d(e.settingsService.saveSettings())}),s()(),o(15,"mat-form-field",5)(16,"mat-label"),c(17,"Role"),s(),o(18,"input",28),f("ngModelChange",function(e){let n=l(t).$implicit;return u(n.role,e)||(n.role=e),d(e)}),p("input",function(){l(t);let e=a(2);return d(e.settingsService.saveSettings())}),s()(),C(19,Kt,7,2,"div",29,v),s()()}if(r&2){let t=g.$implicit,i=a(2);x("expanded",i.expandedPanel===t.name),m(3),b(t.name),m(3),M(i.expandedPanel===t.name?6:-1),m(8),_("ngModel",t.name),m(4),_("ngModel",t.role),m(),S(t.promptTextList)}}function Qt(r,g){if(r&1){let t=w();o(0,"div",3)(1,"mat-checkbox",12),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().useConfig,e)||(n.settings().useConfig=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),c(2," Use Config for Temperature, Top K, Top P "),s(),o(3,"div",13)(4,"div",14)(5,"mat-card")(6,"mat-card-content")(7,"mat-label"),c(8,"Temperature"),s(),o(9,"mat-slider",15)(10,"input",16),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().temperature,e)||(n.settings().temperature=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()()()(),o(11,"mat-card")(12,"mat-card-content")(13,"mat-label"),c(14,"Top P"),s(),o(15,"mat-slider",15)(16,"input",16),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().topP,e)||(n.settings().topP=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()()()(),o(17,"mat-card")(18,"mat-card-content")(19,"mat-label"),c(20,"N"),s(),o(21,"mat-slider",17)(22,"input",16),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().n,e)||(n.settings().n=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()()()()(),o(23,"div",14)(24,"mat-form-field",5)(25,"mat-label"),c(26,"Model"),s(),o(27,"mat-select",6),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().model,e)||(n.settings().model=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),C(28,Rt,3,5,"mat-option",7,v),s()(),o(30,"mat-form-field",5)(31,"mat-label"),c(32,"Processing Strategy"),s(),o(33,"mat-select",8),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().processingStrategy,e)||(n.settings().processingStrategy=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),C(34,jt,2,2,"mat-option",9,v),s()(),o(36,"mat-form-field",5)(37,"mat-label"),c(38,"Max Output Tokens"),s(),o(39,"input",10),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().maxOutputTokens,e)||(n.settings().maxOutputTokens=e),d(e)}),p("change",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()()(),o(40,"div",14)(41,"mat-form-field",5)(42,"mat-label"),c(43,"Role"),s(),o(44,"mat-select",6),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().selectedPrompt,e)||(n.settings().selectedPrompt=e),d(e)}),p("selectionChange",function(){l(t);let e=a();return d(e.onPromptChange())}),C(45,Gt,2,2,"mat-option",9,kt),s()(),o(47,"mat-form-field",5)(48,"mat-label"),c(49,"Google API Key"),s(),o(50,"input",18),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().apiKeys.google,e)||(n.settings().apiKeys.google=e),d(e)}),p("input",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()(),o(51,"mat-form-field",5)(52,"mat-label"),c(53,"Github PAT Token"),s(),o(54,"input",19),f("ngModelChange",function(e){l(t);let n=a();return u(n.settings().apiKeys.github,e)||(n.settings().apiKeys.github=e),d(e)}),p("input",function(){l(t);let e=a();return d(e.settingsService.saveSettings())}),s()()()(),o(55,"button",4),p("click",function(){l(t);let e=a();return d(e.settingsService.addPromptItem())}),o(56,"mat-icon"),c(57,"add"),s(),c(58," Add Role "),s(),o(59,"mat-accordion",20),C(60,$t,21,5,"mat-expansion-panel",21,v),s()()}if(r&2){let t=a();m(),_("ngModel",t.settings().useConfig),m(9),_("ngModel",t.settings().temperature),m(6),_("ngModel",t.settings().topP),m(6),_("ngModel",t.settings().n),m(5),_("ngModel",t.settings().model),x("compareWith",t.compareModels),m(),S(t.settings().models),m(5),_("ngModel",t.settings().processingStrategy),m(),S(t.processingStrategies),m(5),_("ngModel",t.settings().maxOutputTokens),m(5),_("ngModel",t.settings().selectedPrompt),x("compareWith",t.comparePrompts),m(),S(t.settings().prompts),m(5),_("ngModel",t.settings().apiKeys.google),m(4),_("ngModel",t.settings().apiKeys.github),m(6),S(t.settings().prompts)}}var Ut=(()=>{class r{defaultSettings={temperature:1,topP:.95,topK:64,n:1,model:{name:"gemini-exp-1206",org:K.Gemini},selectedPrompt:W.find(t=>t.name==N)||W[0],prompts:W,models:[],apiKeys:{github:"",google:""},maxOutputTokens:8192*4,processingStrategy:L.Combined,sideBarOpen:{aiAgent:!0,aiChat:!0},useConfig:!1};settings=H(this.defaultSettings);aiservice=E(G);constructor(){this.loadSettings()}loadSettings(){let t=localStorage.getItem("settings");if(t){let i=JSON.parse(t);for(let e of Object.keys(this.defaultSettings))e in i||(i[e]=this.defaultSettings[e]);this.defaultSettings.apiKeys=T(T({},this.defaultSettings.apiKeys),i.apiKeys),this.settings.set(i)}else this.settings.set(this.defaultSettings);this.initializeModels()}saveSettings(t){t=t??this.settings(),this.settings.update(()=>T({},t)),localStorage.setItem("settings",JSON.stringify(t))}resetSettings(){this.settings.set(this.defaultSettings),this.initializeModels()}addPrompt(t,i){i?.stopPropagation();let e=this.settings(),n=e.prompts.find(h=>h.name===t.name);if(!n)throw new Error("Prompt not found");n.promptTextList.push({text:"",selected:!1}),this.saveSettings(e)}removePrompt(t,i){let e=this.settings(),n=e.prompts.find(h=>h.name===t.name);if(!n)throw new Error("Prompt not found");n.promptTextList.splice(i,1),this.saveSettings(e)}addPromptItem(){let t=this.settings(),i=`New Prompt ${t.prompts.length+1}`;t.prompts.push({name:i,promptTextList:[],role:""}),this.saveSettings(t)}removePromptItem(t){let i=this.settings(),e=i.prompts.findIndex(n=>n.name===t);if(e===-1)throw new Error("Prompt not found");i.prompts.splice(e,1),this.saveSettings(i)}initializeModels(){let t=this.settings(),i=this.aiservice.loadModels(t);this.saveSettings(F(T({},t),{models:i}))}downloadSettings(){let t=this.settings(),i=JSON.stringify(t,null,2),e=new Blob([i],{type:"application/json"}),n=window.URL.createObjectURL(e),h=document.createElement("a");h.href=n,h.download="settings.json",h.click(),window.URL.revokeObjectURL(n)}async selectAndValidateSettingsJsonFile(){let t=["temperature","topP","topK","n","model","selectedPrompt","prompts","models","apiKeys","maxOutputTokens","processingStrategy","useConfig"],[i]=await window.showOpenFilePicker({multiple:!1,id:"settingsjson",types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]}),n=await(await i.getFile()).text(),h=JSON.parse(n),A=t.filter(Wt=>!(Wt in h));if(A.length>0){console.error("File content is missing required keys:"+A.join(", "));return}this.saveSettings(h)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=B({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),He=(()=>{class r{processingStrategies=Object.values(L);settingsService=E(Ut);router=E($);isCompactView=j(!1);settings=this.settingsService.settings;expandedPanel="";compareModels(t,i){return t.name===i.name&&t.org===i.org}comparePrompts(t,i){return t.name===i.name}onPromptChange(){let t=this.settings();this.settingsService.saveSettings(F(T({},t),{selectedPrompt:t.selectedPrompt}))}resetSettings(){this.settingsService.resetSettings()}onPanelOpen(t){this.expandedPanel=t}onPanelClose(){this.expandedPanel=""}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=D({type:r,selectors:[["app-settings"]],inputs:{isCompactView:[1,"isCompactView"]},decls:10,vars:3,consts:[[1,"toolbar-spacer"],[1,"settings-content"],[1,"compact-settings"],[1,"full-settings"],["mat-button","",3,"click"],["appearance","fill",1,"full-width"],[3,"ngModelChange","selectionChange","ngModel","compareWith"],[3,"value","disabled"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["matInput","","type","number",3,"ngModelChange","change","ngModel"],[1,"retry-date"],[1,"full-width",3,"ngModelChange","change","ngModel"],[1,"settings-grid"],[1,"setting-row"],["min","0","max","1","step","0.01","discrete",""],["matSliderThumb","",3,"ngModelChange","change","ngModel"],["min","1","max","100","step","1","discrete",""],["matInput","","placeholder","Enter Google API Key",3,"ngModelChange","input","ngModel"],["matInput","","placeholder","Enter Github PAT Token",3,"ngModelChange","input","ngModel"],[1,"prompt-accordion"],[3,"expanded"],[3,"opened","closed","expanded"],[1,"panel-actions"],["mat-icon-button",""],["mat-icon-button","","color","warn",3,"click"],[1,"prompt-content"],["matInput","","placeholder","Enter name",3,"ngModelChange","input","ngModel"],["matInput","","placeholder","Enter role",3,"ngModelChange","input","ngModel"],[1,"prompt-text-item"],["mat-icon-button","",3,"click"],[3,"ngModelChange","change","ngModel"],["appearance","fill",1,"prompt-text-field"],["matInput","","placeholder","Enter prompt",3,"ngModelChange","input","ngModel"]],template:function(i,e){i&1&&(o(0,"mat-toolbar")(1,"span"),c(2,"Settings"),s(),R(3,"span",0),o(4,"div"),y(5,Dt,6,0)(6,zt,12,0),s()(),o(7,"div",1),y(8,Bt,23,6,"div",2),y(9,Qt,62,12,"div",3),s()),i&2&&(m(5),M(e.isCompactView()?5:6),m(3),M(e.isCompactView()?8:-1),m(),M(e.isCompactView()?-1:9))},dependencies:[Z,Q,q,U,J,tt,Y,X,wt,St,ft,ht,Ct,xt,ut,_t,st,rt,ot,lt,at,mt,dt,vt,Mt,yt,Vt,Tt,bt,nt,et,it,Et,ct,gt,pt],styles:[".toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.settings-content[_ngcontent-%COMP%]{padding:16px}.settings-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-width:1200px;margin:0 auto}.setting-row[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap}.setting-row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;min-width:200px}.full-width[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{margin-bottom:16px}mat-slider[_ngcontent-%COMP%]{width:100%}.retry-date[_ngcontent-%COMP%]{margin-left:8px;font-size:.8rem;color:#0009}.prompt-accordion[_ngcontent-%COMP%]{margin-top:16px}.panel-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.prompt-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.prompt-text-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.prompt-text-field[_ngcontent-%COMP%]{flex-grow:1}.dark-theme[_nghost-%COMP%]   .retry-date[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .retry-date[_ngcontent-%COMP%]{color:#fff9}"]})}return r})();export{Ut as a,He as b};
